 <div class="container mt-4">
    <h2>Statistics</h2>

    <div class="chart-container">
      <h3>Product Statistics</h3>
      <canvas id="productChart" class="chart"></canvas>
    </div>

    <div class="chart-container">
      <h3>Survey Statistics</h3>
      <canvas id="surveyChart" class="chart"></canvas>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const productData = {
        labels: <%= raw @product_statistics.map(&:name).to_json %>,
        datasets: [{
          label: 'Surveys per Product',
          data: <%= raw @product_statistics.map(&:survey_count).to_json %>,
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1
        }]
      };

      const surveyData = {
        labels: <%= raw @survey_statistics.map(&:title).to_json %>,
        datasets: [{
          label: 'Responses per Survey',
          data: <%= raw @survey_statistics.map(&:response_count).to_json %>,
          backgroundColor: 'rgba(153, 102, 255, 0.2)',
          borderColor: 'rgba(153, 102, 255, 1)',
          borderWidth: 1
        }]
      };

      const choiceData = {
        labels: <%= raw @choice_statistics.map(&:content).to_json %>,
        datasets: [{
          label: 'Responses per Choice',
          data: <%= raw @choice_statistics.map(&:response_count).to_json %>,
          backgroundColor: 'rgba(255, 159, 64, 0.2)',
          borderColor: 'rgba(255, 159, 64, 1)',
          borderWidth: 1
        }]
      };

      new Chart(document.getElementById('productChart'), {
        type: 'bar',
        data: productData,
        options: {
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });

      new Chart(document.getElementById('surveyChart'), {
        type: 'bar',
        data: surveyData,
        options: {
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    });
  </script>
